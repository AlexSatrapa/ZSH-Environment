function maketags {
   [ -x /usr/bin/bbedit ] && /usr/bin/bbedit --maketags . 2> /dev/null
   [ -x /usr/local/bin/bbedit ] && /usr/local/bin/bbedit --maketags . 2> /dev/null
   }

function findnotes {
	if [ -n "$1" ] ; then
		DIR=$1
	else
		DIR=`pwd`
	fi
	UP=`dirname $DIR`
	if [ $UP = / ]; then
		echo Notes directory not found. 1>&2
	elif [ -d $DIR/Notes ]; then
			echo $DIR/Notes
	else
		echo `findnotes $UP`
	fi
	unset UP DIR
	}

function newnote {
	NOTES=`findnotes`
	BASE=`basename $NOTES`
	if [ "$BASE" = "Notes" ]; then
		FILE=`date "+%Y-%m-%d"`.md
		touch $NOTES/$FILE
		bbedit $NOTES/$FILE
	else
		echo "Not in a Notes directory."
	fi
	unset BASE DIR
	}
